(this["webpackJsonpsweep-line"]=this["webpackJsonpsweep-line"]||[]).push([[0],{23:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var r,i,s,o,c,a,u=n(2),b=n(6),x=n.n(b),j=(n(23),n(11)),l=n(3),d=n(5),h=n.n(d),y=n(1),f=n(8),p=n.n(f),O=n(9),m=n(0),g=Object(l.a)((function(t){var e=t.data,n=t.state,r=n.xToPx(e[0].x),i=n.yToPx(e[0].y),s=n.xToPx(e[1].x),o=n.yToPx(e[1].y),c=Object(u.useRef)(Object(y.b)((function(t,r,i){e[t].x=n.pxToX(r),e[t].y=n.pxToY(i)}))).current,a=Object(u.useRef)((function(t,e){return c(0,e.lastX,e.lastY)})).current,b=Object(u.useRef)((function(t,e){return c(1,e.lastX,e.lastY)})).current;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p.a,{defaultPosition:{x:r,y:i},position:{x:r,y:i},onDrag:a,onStop:a,children:Object(m.jsx)("div",{className:h.a.lineSegmentPoint})}),Object(m.jsx)(p.a,{defaultPosition:{x:s,y:o},position:{x:s,y:o},onDrag:b,onStop:b,children:Object(m.jsx)("div",{className:h.a.lineSegmentPoint})}),Object(m.jsx)(O.Line,{x0:r,y0:i,x1:s,y1:o,within:h.a.plot})]})})),v=Object(l.a)((function(t){var e=t.state,n={x0:e.xToPx(e.bounds.minX),x1:e.xToPx(e.bounds.maxX),y0:e.yToPx(0),y1:e.yToPx(0)},r={x0:e.xToPx(0),x1:e.xToPx(0),y0:e.yToPx(e.bounds.minY),y1:e.yToPx(e.bounds.maxY)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.Line,{x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1,borderColor:"gray",zIndex:-1,within:h.a.plot}),Object(m.jsx)(O.Line,{x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,borderColor:"gray",zIndex:-1,within:h.a.plot})]})})),N=Object(l.a)((function(t){var e=t.state,n=Object(u.useState)(!1),r=Object(j.a)(n,2),i=r[0],s=r[1];Object(u.useEffect)((function(){setTimeout((function(){return s(!0)}),100)}));var o=Object(u.useRef)((function(t,n){return e.drag(n.deltaX,n.deltaY)})).current;return Object(m.jsx)(f.DraggableCore,{onDrag:o,cancel:"."+h.a.lineSegmentPoint,children:Object(m.jsx)("div",{className:h.a.plot,children:i&&Object(m.jsxs)(m.Fragment,{children:[e.segments.map((function(t,n){return Object(m.jsx)(g,{data:t,state:e},n)})),Object(m.jsx)(v,{state:e})]})})})})),P=n(7),w=n(17),C=n(18),S=n(4);n(32);function T(t,e,n,r,i){return(t-e)*(i-r)/(n-e)+r}var X,Y,A=(r=function(){function t(e,n){Object(w.a)(this,t),this.width=e,this.height=n,Object(P.a)(this,"offsetX",i,this),Object(P.a)(this,"offsetY",s,this),Object(P.a)(this,"scale",o,this),Object(P.a)(this,"segments",c,this),Object(P.a)(this,"cross",a,this),Object(y.f)(this)}return Object(C.a)(t,[{key:"bounds",get:function(){return{minX:this.offsetX-this.width/2*this.scale,minY:this.offsetY-this.height/2*this.scale,maxX:this.offsetX+this.width/2*this.scale,maxY:this.offsetY+this.height/2*this.scale}}},{key:"deleteSegment",value:function(){this.segments.pop()}},{key:"addSegment",value:function(t){this.segments.push(t)}},{key:"drag",value:function(t,e){this.offsetX-=t*this.scale,this.offsetY+=e*this.scale}},{key:"addCross",value:function(t){this.cross.push(t)}},{key:"pxToY",value:function(t){return T(t,0,this.height,this.bounds.maxY,this.bounds.minY)}},{key:"pxToX",value:function(t){return T(t,0,this.width,this.bounds.minX,this.bounds.maxX)}},{key:"yToPx",value:function(t){return T(t,this.bounds.minY,this.bounds.maxY,this.height,0)}},{key:"xToPx",value:function(t){return T(t,this.bounds.minX,this.bounds.maxX,0,this.width)}}]),t}(),i=Object(S.a)(r.prototype,"offsetX",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=Object(S.a)(r.prototype,"offsetY",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=Object(S.a)(r.prototype,"scale",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),c=Object(S.a)(r.prototype,"segments",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[{x:0,y:0},{x:2,y:2}]]}}),a=Object(S.a)(r.prototype,"cross",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(S.a)(r.prototype,"bounds",[y.c],Object.getOwnPropertyDescriptor(r.prototype,"bounds"),r.prototype),Object(S.a)(r.prototype,"deleteSegment",[y.b],Object.getOwnPropertyDescriptor(r.prototype,"deleteSegment"),r.prototype),Object(S.a)(r.prototype,"addSegment",[y.b],Object.getOwnPropertyDescriptor(r.prototype,"addSegment"),r.prototype),Object(S.a)(r.prototype,"drag",[y.b],Object.getOwnPropertyDescriptor(r.prototype,"drag"),r.prototype),Object(S.a)(r.prototype,"addCross",[y.b],Object.getOwnPropertyDescriptor(r.prototype,"addCross"),r.prototype),r),k=Object(l.a)((function(t){var e=t.segment;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"number",value:Number(e[0].x.toFixed(4)),onChange:Object(y.b)((function(t){return!isNaN(t.target.valueAsNumber)&&(e[0].x=t.target.valueAsNumber)}))})}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"number",value:Number(e[0].y.toFixed(4)),onChange:Object(y.b)((function(t){return!isNaN(t.target.valueAsNumber)&&(e[0].y=t.target.valueAsNumber)}))})}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"number",value:Number(e[1].x.toFixed(4)),onChange:Object(y.b)((function(t){return!isNaN(t.target.valueAsNumber)&&(e[1].x=t.target.valueAsNumber)}))})}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"number",value:Number(e[1].y.toFixed(4)),onChange:Object(y.b)((function(t){return!isNaN(t.target.valueAsNumber)&&(e[1].y=t.target.valueAsNumber)}))})})]})})),F=Object(l.a)((function(t){var e=t.cross;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"number",value:Number(e[0].x.toFixed(4)),onChange:Object(y.b)((function(t){return!isNaN(t.target.valueAsNumber)&&(e[0].x=t.target.valueAsNumber)}))})}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"number",value:Number(e[0].y.toFixed(4)),onChange:Object(y.b)((function(t){return!isNaN(t.target.valueAsNumber)&&(e[0].y=t.target.valueAsNumber)}))})})]})})),D=Object(l.a)((function(t){var e=t.state;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"x0"}),Object(m.jsx)("td",{children:"y0"}),Object(m.jsx)("td",{children:"x1"}),Object(m.jsx)("td",{children:"y1"})]})}),Object(m.jsx)("tbody",{children:e.segments.map((function(t,e){return Object(m.jsx)(k,{segment:t},e)}))})]}),Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"x"}),Object(m.jsx)("td",{children:"y"})]})}),Object(m.jsx)("tbody",{children:e.cross.map((function(t,e){return Object(m.jsx)(F,{cross:t},e)}))})]})]})}));!function(t){t[t.Start=0]="Start",t[t.Cross=1]="Cross",t[t.Finish=2]="Finish"}(X||(X={}));var z=new Array(2);function M(t,e){return Y[t][0].x==Y[t][1].x?Math.min(Y[t][0].y,Y[t][1].y):Y[t][0].y+(Y[t][1].y-Y[t][0].y)*(e-Y[t][0].x)/(Y[t][1].x-Y[t][0].x)}function _(t,e){var n,r=[Y[t][0].x,Y[t][0].y,Y[t][1].x,Y[t][1].y],i=r[0],s=r[1],o=r[2],c=r[3],a=[Y[e][0].x,Y[e][0].y,Y[e][1].x,Y[e][1].y],u=a[0],b=a[1],x=a[2],j=a[3];if(c-s!=0){var l=(o-i)/(s-c),d=u-x+(b-j)*l;if(!d)return!1;n=(u-i+(b-s)*l)/d}else{if(!(b-j))return!1;n=(b-s)/(b-j)}return z[0]=u+(x-u)*n,z[1]=b+(j-b)*n,z[0]>=Math.min(i,o)&&z[0]<=Math.max(i,o)&&z[0]>=Math.min(u,x)&&z[0]<=Math.max(u,x)}var I=function(t){Y=t.segments,t.cross.length=0;for(var e=new Array(2*Y.length),n=[],r=0;r<Y.length;r++){var i=void 0,s=void 0,o=Y[r][0].x,c=Y[r][1].x;if(o==c){var a=Y[r][0].y<Y[r][1].y?[o,c]:[c,o],u=Object(j.a)(a,2);i=u[0],s=u[1]}else{var b=[Math.min(o,c),Math.max(o,c)];i=b[0],s=b[1]}e[2*r]={x:i,type:X.Start,id:r},e[2*r+1]={x:s,type:X.Finish,id:r}}e.sort((function(t,e){return t.x-e.x}));for(var x=function(t){if(e[t].type==X.Start){var r;for(r=0;r<n.length&&!(M(n[r],e[t].x)>M(e[t].id,e[t].x));r++);n.splice(r,0,e[t].id),d(r),h(r)}else if(e[t].type==X.Cross){var i=n.findIndex((function(n){return n==e[t].id})),s=[n[i+1],n[i]];n[i]=s[0],n[i+1]=s[1],d(i+1),h(i)}else{var o=n.findIndex((function(n){return n==e[t].id}));n.splice(o,1)}},l=0;l<e.length;l++)x(l);function d(r){if(r+1<n.length&&_(n[r],n[r+1])){var i=y(z[0]);-1!=i&&(e.splice(i,0,{x:z[0],type:X.Cross,id:n[r],id2:n[r+1]}),t.addCross([{x:z[0],y:z[1]}]))}}function h(r){if(r-1>=0&&_(n[r],n[r-1])){var i=y(z[0]);-1!=i&&(e.splice(i,0,{x:z[0],type:X.Cross,id:n[r-1],id2:n[r]}),t.addCross([{x:z[0],y:z[1]}]))}}function y(t){var n;for(n=0;n<e.length;n++){if(e[n].x==z[0]&&e[n].type==X.Cross)return-1;if(e[n].x>=t)break}return n}alert("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u0439: "+t.cross.length)},R=new A(500,500);var J=Object(l.a)((function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(N,{state:R}),Object(m.jsx)("button",{onClick:function(){return R.addSegment([{x:-2,y:2},{x:2,y:2}])},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:function(){return R.deleteSegment()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:function(){return I(R)},children:"\u041d\u0430\u0447\u0430\u0442\u044c"}),Object(m.jsx)(D,{state:R})]})}));x.a.render(Object(m.jsx)(J,{}),document.getElementById("root"))},5:function(t,e,n){t.exports={plot:"Plot_plot__3YHXA",lineSegmentPoint:"Plot_lineSegmentPoint__r3rJt"}}},[[33,1,2]]]);
//# sourceMappingURL=main.4a72b179.chunk.js.map